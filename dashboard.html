<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>DecisionLens — Dashboard (Phase-2)</title>
  <link rel="stylesheet" href="assets/styles.css"/>

  <!-- Firebase (compat) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
</head>

<body class="dash">

  <header class="topbar">
    <div class="brand">
      <div class="logo-dot"></div>
      <div>
        <div class="brand-name">DecisionLens</div>
        <div class="brand-sub">Decision Intelligence System — Not Trading Advice</div>
      </div>
    </div>
    <div class="topbar-right">
      <div class="tiny muted">Phase-2</div>
      <a class="btn ghost small" href="index.html">Home</a>
    </div>
  </header>

  <main class="dash-wrap">
    <section class="center">
      <div class="row card">
        <div class="row-head">
          <div>
            <div class="h2">Market Sessions</div>
            <div class="tiny muted">Times auto-adjust to your local timezone.</div>
          </div>
          <div class="tiny muted" id="nowPtk"></div>
        </div>
        <div class="sessions" id="sessionsGrid"></div>
      </div>

      <div class="row card">
        <div class="row-head">
          <div>
            <div class="h2">News Intelligence</div>
            <div class="tiny muted">Headline → meta → summary → key points → why it matters → source.</div>
          </div>
          <div class="tiny muted">
            <span class="badge impact-low">Low impact • blue</span>
          </div>
        </div>

        <div class="news-controls">
          <button class="btn ghost small" id="prevPage">Prev</button>
          <div class="tiny muted" id="pageInfo"></div>
          <button class="btn ghost small" id="nextPage">Next</button>

          <div class="spacer"></div>

          <div class="tiny muted">Archive:</div>
          <input class="input small" type="date" id="archiveDate"/>
        </div>

        <div id="newsList" class="news"></div>
      </div>
    </section>

    <aside class="right">
      <div class="card">
        <div class="row-head">
          <div>
            <div class="h2">Watchlist</div>
            <div class="tiny muted">Live context view.</div>
          </div>
        </div>

        <div class="tabs">
          <button class="tab active" data-tab="btc">BTC Followers</button>
          <button class="tab" data-tab="eth">ETH Followers</button>
          <button class="tab" data-tab="ind">Independent</button>
        </div>

        <div class="watchlist" id="watchlist"></div>
      </div>

      <div class="card">
        <div class="row-head">
          <div>
            <div class="h2">Premium Panels</div>
            <div class="tiny muted">Locked until subscription approval.</div>
          </div>
        </div>

        <div class="locked-grid">
          <button class="locked-card">
            <div class="locked-title">Exchange Listings</div>
            <div class="tiny muted">Top 3 exchanges • countdown • links</div>
          </button>

          <button class="locked-card">
            <div class="locked-title">Narrative Dynamics</div>
            <div class="tiny muted">Funding • GitHub signals • context</div>
          </button>

          <button class="locked-card">
            <div class="locked-title">Institutional Context</div>
            <div class="tiny muted">Liquidity • participation • fatigue</div>
          </button>

          <button class="locked-card">
            <div class="locked-title">Notifications</div>
            <div class="tiny muted">Session & macro context alerts</div>
          </button>
        </div>
      </div>

      <div class="card">
        <div class="row-head">
          <div>
            <div class="h2">Education</div>
            <div class="tiny muted">Phase-3</div>
          </div>
        </div>
        <div class="tiny muted">
          Education module activates in Phase-3.
        </div>
      </div>
    </aside>
  </main>

  <!-- Existing App Logic -->
  <script src="assets/app.js"></script>

  <!-- Firebase Init + Auth Guard -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCT1FM9W9YcbCmVteamLaZ5N_0d82b_MKk",
      authDomain: "decisionlens-85f62.firebaseapp.com",
      projectId: "decisionlens-85f62",
      storageBucket: "decisionlens-85f62.firebasestorage.app",
      messagingSenderId: "63642468078",
      appId: "1:63642468078:web:d680fb671b9dff53e97dff"
    };

    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }

    const auth = firebase.auth();

    auth.onAuthStateChanged((user) => {
      if (!user) {
        window.location.href = "login.html";
      }
    });
  </script>

</body>
</html>
